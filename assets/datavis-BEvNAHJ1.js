var f=Object.defineProperty;var g=(t,i,o)=>i in t?f(t,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[i]=o;var w=(t,i,o)=>g(t,typeof i!="symbol"?i+"":i,o);import{s as l}from"./index-Bd-7qW32.js";const p="51.38",u="-2.44",H={time:1747818e3,interval:900,temperature_2m:10.9,is_day:1,cloud_cover:100,precipitation:1.1,wind_speed_10m:6.9,rain:0,snowfall:1.1};let e,h=[];class m{constructor(i,o,d,n,r){w(this,"x");w(this,"y");w(this,"xv");w(this,"yv");w(this,"snow");this.x=i,this.y=o,this.xv=d,this.yv=n,this.snow=r,console.log(r)}fall(){this.x+=this.xv*(Math.random()/5+.8),this.x>windowWidth&&(this.x-=windowWidth),this.y+=this.yv,this.y>windowHeight&&(this.y-=windowHeight)}draw(){push(),this.snow?stroke(100,0,100,.5):stroke(240,89,72,.5),strokeWeight(2),line(this.x,this.y,this.x+this.xv,this.y+this.yv),pop()}}l.setup=function(){createCanvas(windowWidth,windowHeight),colorMode(HSL),angleMode(DEGREES)};l.preload=function(){fetch("https://api.open-meteo.com/v1/forecast?latitude="+p+"&longitude="+u+"&current=temperature_2m,is_day,cloud_cover,precipitation,wind_speed_10m,rain,snowfall&timeformat=unixtime&wind_speed_unit=mph").then(t=>{t.ok?(console.log("Got weather data"),t.json().then(i=>{console.log(i),e=i.current})):(console.log("Failed to fetch weather data, using fallback"),e=H)})};l.draw=function(){if(!e)return;let t=90;e.precipitation&&(t-=40),e.cloud_cover&&(t/=e.cloud_cover);let i=61;if(i<1&&(i-=10),e.is_day||(i-=50),background(197,t,i),push(),noStroke(),fill(32,80,13),rect(0,windowHeight-50,windowWidth,50),e.snowfall>0?fill(126,0,100):fill(126,100,21),rect(0,windowHeight-60,windowWidth,10),pop(),push(),noStroke(),fill(37,27,56),rect(100,windowHeight-660,800,600),fill(37,27,46),triangle(100,windowHeight-660,500,windowHeight-860,900,windowHeight-660),fill(0,96,26),rect(450,windowHeight-260,100,200),fill(42,96,50),circle(530,windowHeight-160,12),stroke(150),strokeWeight(5),fill(240,100,15),rect(150,windowHeight-210,250,100),rect(150,windowHeight-210,60,100),rect(600,windowHeight-210,250,100),rect(790,windowHeight-210,60,100),rect(150,windowHeight-560,250,100),rect(150,windowHeight-560,60,100),rect(600,windowHeight-560,250,100),rect(790,windowHeight-560,60,100),rect(450,windowHeight-600,100,180),pop(),e.precipitation>0){if(h.length===0){let o=e.precipitation*30,d=Math.floor(windowWidth/o);for(let n=0;n<windowWidth;n+=d)for(let r=0;r<windowHeight;r+=d){let s=Math.random()*20+-10,a=Math.random()*20+-10,c=new m(n+s,r+a,e.wind_speed_10m,9.8,e.snowfall>0);h.push(c)}}h.forEach((o,d,n)=>{o.draw(),o.fall()})}};
